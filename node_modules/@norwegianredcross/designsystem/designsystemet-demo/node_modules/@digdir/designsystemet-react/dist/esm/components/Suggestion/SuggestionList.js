'use client';
import { jsx } from 'react/jsx-runtime';
import { forwardRef, useContext, useEffect } from 'react';
import '@u-elements/u-datalist';
import { SuggestionContext } from './Suggestion.js';

/**
 * Component that provides a suggestion list.
 *
 * Place as a descendant of `Suggestion`
 *
 * @example
 * <Suggestion>
 *   <Suggestion.Input />
 *   <Suggestion.List />
 * </Suggestion>
 */
const SuggestionList = forwardRef(function SuggestionList({ singular = '%d forslag', plural = '%d forslag', className, id, ...rest }, ref) {
    const { inputRef, listId, setListId, handleFilter } = useContext(SuggestionContext);
    useEffect(() => handleFilter?.(inputRef?.current)); // Must run on every render
    useEffect(() => {
        if (id && listId !== id)
            setListId?.(id);
    }, [listId, id, setListId]);
    return (jsx("u-datalist", { "data-sr-singular": singular, "data-sr-plural": plural, class: className, id: listId, ref: ref, ...rest }));
});

export { SuggestionList };
