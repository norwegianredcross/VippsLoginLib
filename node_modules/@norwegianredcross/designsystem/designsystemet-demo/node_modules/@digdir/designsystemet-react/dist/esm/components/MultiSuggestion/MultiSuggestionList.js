'use client';
import { jsx } from 'react/jsx-runtime';
import { forwardRef, useContext, useEffect } from 'react';
import '@u-elements/u-datalist';
import { MultiSuggestionContext } from './MultiSuggestion.js';

/**
 * Component that provides a MultiSuggestion list.
 *
 * Place as a descendant of `MultiSuggestion`
 *
 * @example
 * <MultiSuggestion>
 *   <MultiSuggestion.Input />
 *   <MultiSuggestion.List />
 * </MultiSuggestion>
 */
const MultiSuggestionList = forwardRef(function MultiSuggestionList({ singular = '%d forslag', plural = '%d forslag', className, id, ...rest }, ref) {
    const { inputRef, listId, setListId, handleFilter } = useContext(MultiSuggestionContext);
    useEffect(() => handleFilter?.(inputRef?.current)); // Must run on every render
    useEffect(() => {
        if (id && listId !== id)
            setListId?.(id);
    }, [listId, id, setListId]);
    return (jsx("u-datalist", { "data-sr-singular": singular, "data-sr-plural": plural, class: className, id: listId, ref: ref, ...rest }));
});

export { MultiSuggestionList };
