{"ast":null,"code":"'use client';\n\nimport { jsx } from 'react/jsx-runtime';\nimport { useMergeRefs } from '@floating-ui/react';\nimport { Slot } from '@radix-ui/react-slot';\nimport { forwardRef, useState, useRef, useEffect, createContext } from 'react';\nconst RovingFocusContext = createContext({\n  elements: {\n    current: new Map()\n  },\n  getOrderedItems: () => [],\n  setFocusableValue: () => {\n    /* intentionally empty */\n  },\n  onShiftTab: () => {\n    /* intentionally empty */\n  },\n  focusableValue: null,\n  orientation: 'horizontal'\n});\nconst RovingFocusRoot = forwardRef(({\n  activeValue,\n  asChild,\n  orientation = 'horizontal',\n  onBlur,\n  onFocus,\n  ...rest\n}, ref) => {\n  const Component = asChild ? Slot : 'div';\n  const [focusableValue, setFocusableValue] = useState(null);\n  const [isShiftTabbing, setIsShiftTabbing] = useState(false);\n  const elements = useRef(new Map());\n  const myRef = useRef(null);\n  const refs = useMergeRefs([ref, myRef]);\n  const getOrderedItems = () => {\n    if (!myRef.current) return [];\n    const elementsFromDOM = Array.from(myRef.current.querySelectorAll('[data-roving-tabindex-item]'));\n    return Array.from(elements.current).sort((a, b) => elementsFromDOM.indexOf(a[1]) - elementsFromDOM.indexOf(b[1])).map(([value, element]) => ({\n      value,\n      element\n    }));\n  };\n  useEffect(() => {\n    setFocusableValue(activeValue ?? null);\n  }, [activeValue]);\n  return jsx(RovingFocusContext.Provider, {\n    value: {\n      elements,\n      getOrderedItems,\n      focusableValue,\n      setFocusableValue,\n      onShiftTab: () => {\n        setIsShiftTabbing(true);\n      },\n      orientation\n    },\n    children: jsx(Component, {\n      ...rest,\n      tabIndex: isShiftTabbing ? -1 : 0,\n      onBlur: e => {\n        onBlur?.(e);\n        setIsShiftTabbing(false);\n        setFocusableValue(activeValue ?? null);\n      },\n      onFocus: e => {\n        onFocus?.(e);\n        if (e.target !== e.currentTarget) return;\n        const orderedItems = getOrderedItems();\n        if (orderedItems.length === 0) return;\n        if (focusableValue != null) {\n          elements.current.get(focusableValue)?.focus();\n        } else if (activeValue != null) {\n          elements.current.get(activeValue)?.focus();\n        } else {\n          orderedItems.at(0)?.element.focus();\n        }\n      },\n      ref: refs\n    })\n  });\n});\nexport { RovingFocusContext, RovingFocusRoot };","map":{"version":3,"names":["jsx","useMergeRefs","Slot","forwardRef","useState","useRef","useEffect","createContext","RovingFocusContext","elements","current","Map","getOrderedItems","setFocusableValue","onShiftTab","focusableValue","orientation","RovingFocusRoot","activeValue","asChild","onBlur","onFocus","rest","ref","Component","isShiftTabbing","setIsShiftTabbing","myRef","refs","elementsFromDOM","Array","from","querySelectorAll","sort","a","b","indexOf","map","value","element","Provider","children","tabIndex","e","target","currentTarget","orderedItems","length","get","focus","at"],"sources":["/Users/riccardomarini/Dropbox/Lavori/RedCross/Login Vipps/LoginVippsLib/node_modules/@digdir/designsystemet-react/dist/esm/utilities/RovingFocus/RovingFocusRoot.js"],"sourcesContent":["'use client';\nimport { jsx } from 'react/jsx-runtime';\nimport { useMergeRefs } from '@floating-ui/react';\nimport { Slot } from '@radix-ui/react-slot';\nimport { forwardRef, useState, useRef, useEffect, createContext } from 'react';\n\nconst RovingFocusContext = createContext({\n    elements: { current: new Map() },\n    getOrderedItems: () => [],\n    setFocusableValue: () => {\n        /* intentionally empty */\n    },\n    onShiftTab: () => {\n        /* intentionally empty */\n    },\n    focusableValue: null,\n    orientation: 'horizontal',\n});\nconst RovingFocusRoot = forwardRef(({ activeValue, asChild, orientation = 'horizontal', onBlur, onFocus, ...rest }, ref) => {\n    const Component = asChild ? Slot : 'div';\n    const [focusableValue, setFocusableValue] = useState(null);\n    const [isShiftTabbing, setIsShiftTabbing] = useState(false);\n    const elements = useRef(new Map());\n    const myRef = useRef(null);\n    const refs = useMergeRefs([ref, myRef]);\n    const getOrderedItems = () => {\n        if (!myRef.current)\n            return [];\n        const elementsFromDOM = Array.from(myRef.current.querySelectorAll('[data-roving-tabindex-item]'));\n        return Array.from(elements.current)\n            .sort((a, b) => elementsFromDOM.indexOf(a[1]) - elementsFromDOM.indexOf(b[1]))\n            .map(([value, element]) => ({ value, element }));\n    };\n    useEffect(() => {\n        setFocusableValue(activeValue ?? null);\n    }, [activeValue]);\n    return (jsx(RovingFocusContext.Provider, { value: {\n            elements,\n            getOrderedItems,\n            focusableValue,\n            setFocusableValue,\n            onShiftTab: () => {\n                setIsShiftTabbing(true);\n            },\n            orientation,\n        }, children: jsx(Component, { ...rest, tabIndex: isShiftTabbing ? -1 : 0, onBlur: (e) => {\n                onBlur?.(e);\n                setIsShiftTabbing(false);\n                setFocusableValue(activeValue ?? null);\n            }, onFocus: (e) => {\n                onFocus?.(e);\n                if (e.target !== e.currentTarget)\n                    return;\n                const orderedItems = getOrderedItems();\n                if (orderedItems.length === 0)\n                    return;\n                if (focusableValue != null) {\n                    elements.current.get(focusableValue)?.focus();\n                }\n                else if (activeValue != null) {\n                    elements.current.get(activeValue)?.focus();\n                }\n                else {\n                    orderedItems.at(0)?.element.focus();\n                }\n            }, ref: refs }) }));\n});\n\nexport { RovingFocusContext, RovingFocusRoot };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}