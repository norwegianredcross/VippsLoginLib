{"ast":null,"code":"'use client';\n\nimport { useMergeRefs } from '@floating-ui/react';\nimport { useId, useContext, useMemo, useEffect } from 'react';\nimport { useDebounceCallback } from '../../../utilities/hooks/useDebounceCallback/useDebounceCallback.js';\nimport { ComboboxContext } from '../ComboboxContext.js';\nimport { useComboboxId, useComboboxIdDispatch } from '../ComboboxIdContext.js';\nimport { prefix } from '../utilities.js';\nconst useComboboxOption = ({\n  id,\n  ref,\n  value\n}) => {\n  const generatedId = useId();\n  const newId = id || generatedId;\n  const context = useContext(ComboboxContext);\n  const {\n    activeIndex\n  } = useComboboxId();\n  const dispatch = useComboboxIdDispatch();\n  if (!context) {\n    throw new Error('ComboboxOption must be used within a Combobox');\n  }\n  const {\n    selectedOptions,\n    onOptionClick,\n    setListRef,\n    customIds,\n    filteredOptions\n  } = context;\n  const index = useMemo(() => filteredOptions.indexOf(prefix(String(value))) + customIds.length, [customIds.length, filteredOptions, value]);\n  const combinedRef = useMergeRefs([node => {\n    setListRef(index, node);\n  }, ref]);\n  if (index === -1) {\n    throw new Error('Internal error: ComboboxOption did not find index');\n  }\n  const selected = selectedOptions[prefix(value)];\n  const active = activeIndex === index;\n  useEffect(() => {\n    if (active) {\n      dispatch?.({\n        type: 'SET_ACTIVE_INDEX',\n        payload: index\n      });\n    }\n  }, [generatedId, id, dispatch, active, index]);\n  const onOptionClickDebounced = useDebounceCallback(() => onOptionClick(value), 50);\n  return {\n    id: newId,\n    ref: combinedRef,\n    selected,\n    active,\n    onOptionClick: onOptionClickDebounced\n  };\n};\nexport { useComboboxOption };","map":{"version":3,"names":["useMergeRefs","useId","useContext","useMemo","useEffect","useDebounceCallback","ComboboxContext","useComboboxId","useComboboxIdDispatch","prefix","useComboboxOption","id","ref","value","generatedId","newId","context","activeIndex","dispatch","Error","selectedOptions","onOptionClick","setListRef","customIds","filteredOptions","index","indexOf","String","length","combinedRef","node","selected","active","type","payload","onOptionClickDebounced"],"sources":["/Users/riccardomarini/Dropbox/Lavori/RedCross/Login Vipps/LoginVippsLib/node_modules/@digdir/designsystemet-react/dist/esm/components/Combobox/Option/useComboboxOption.js"],"sourcesContent":["'use client';\nimport { useMergeRefs } from '@floating-ui/react';\nimport { useId, useContext, useMemo, useEffect } from 'react';\nimport { useDebounceCallback } from '../../../utilities/hooks/useDebounceCallback/useDebounceCallback.js';\nimport { ComboboxContext } from '../ComboboxContext.js';\nimport { useComboboxId, useComboboxIdDispatch } from '../ComboboxIdContext.js';\nimport { prefix } from '../utilities.js';\n\nconst useComboboxOption = ({ id, ref, value, }) => {\n    const generatedId = useId();\n    const newId = id || generatedId;\n    const context = useContext(ComboboxContext);\n    const { activeIndex } = useComboboxId();\n    const dispatch = useComboboxIdDispatch();\n    if (!context) {\n        throw new Error('ComboboxOption must be used within a Combobox');\n    }\n    const { selectedOptions, onOptionClick, setListRef, customIds, filteredOptions, } = context;\n    const index = useMemo(() => filteredOptions.indexOf(prefix(String(value))) + customIds.length, [customIds.length, filteredOptions, value]);\n    const combinedRef = useMergeRefs([\n        (node) => {\n            setListRef(index, node);\n        },\n        ref,\n    ]);\n    if (index === -1) {\n        throw new Error('Internal error: ComboboxOption did not find index');\n    }\n    const selected = selectedOptions[prefix(value)];\n    const active = activeIndex === index;\n    useEffect(() => {\n        if (active) {\n            dispatch?.({ type: 'SET_ACTIVE_INDEX', payload: index });\n        }\n    }, [generatedId, id, dispatch, active, index]);\n    const onOptionClickDebounced = useDebounceCallback(() => onOptionClick(value), 50);\n    return {\n        id: newId,\n        ref: combinedRef,\n        selected,\n        active,\n        onOptionClick: onOptionClickDebounced,\n    };\n};\n\nexport { useComboboxOption };\n"],"mappings":"AAAA,YAAY;;AACZ,SAASA,YAAY,QAAQ,oBAAoB;AACjD,SAASC,KAAK,EAAEC,UAAU,EAAEC,OAAO,EAAEC,SAAS,QAAQ,OAAO;AAC7D,SAASC,mBAAmB,QAAQ,qEAAqE;AACzG,SAASC,eAAe,QAAQ,uBAAuB;AACvD,SAASC,aAAa,EAAEC,qBAAqB,QAAQ,yBAAyB;AAC9E,SAASC,MAAM,QAAQ,iBAAiB;AAExC,MAAMC,iBAAiB,GAAGA,CAAC;EAAEC,EAAE;EAAEC,GAAG;EAAEC;AAAO,CAAC,KAAK;EAC/C,MAAMC,WAAW,GAAGb,KAAK,CAAC,CAAC;EAC3B,MAAMc,KAAK,GAAGJ,EAAE,IAAIG,WAAW;EAC/B,MAAME,OAAO,GAAGd,UAAU,CAACI,eAAe,CAAC;EAC3C,MAAM;IAAEW;EAAY,CAAC,GAAGV,aAAa,CAAC,CAAC;EACvC,MAAMW,QAAQ,GAAGV,qBAAqB,CAAC,CAAC;EACxC,IAAI,CAACQ,OAAO,EAAE;IACV,MAAM,IAAIG,KAAK,CAAC,+CAA+C,CAAC;EACpE;EACA,MAAM;IAAEC,eAAe;IAAEC,aAAa;IAAEC,UAAU;IAAEC,SAAS;IAAEC;EAAiB,CAAC,GAAGR,OAAO;EAC3F,MAAMS,KAAK,GAAGtB,OAAO,CAAC,MAAMqB,eAAe,CAACE,OAAO,CAACjB,MAAM,CAACkB,MAAM,CAACd,KAAK,CAAC,CAAC,CAAC,GAAGU,SAAS,CAACK,MAAM,EAAE,CAACL,SAAS,CAACK,MAAM,EAAEJ,eAAe,EAAEX,KAAK,CAAC,CAAC;EAC1I,MAAMgB,WAAW,GAAG7B,YAAY,CAAC,CAC5B8B,IAAI,IAAK;IACNR,UAAU,CAACG,KAAK,EAAEK,IAAI,CAAC;EAC3B,CAAC,EACDlB,GAAG,CACN,CAAC;EACF,IAAIa,KAAK,KAAK,CAAC,CAAC,EAAE;IACd,MAAM,IAAIN,KAAK,CAAC,mDAAmD,CAAC;EACxE;EACA,MAAMY,QAAQ,GAAGX,eAAe,CAACX,MAAM,CAACI,KAAK,CAAC,CAAC;EAC/C,MAAMmB,MAAM,GAAGf,WAAW,KAAKQ,KAAK;EACpCrB,SAAS,CAAC,MAAM;IACZ,IAAI4B,MAAM,EAAE;MACRd,QAAQ,GAAG;QAAEe,IAAI,EAAE,kBAAkB;QAAEC,OAAO,EAAET;MAAM,CAAC,CAAC;IAC5D;EACJ,CAAC,EAAE,CAACX,WAAW,EAAEH,EAAE,EAAEO,QAAQ,EAAEc,MAAM,EAAEP,KAAK,CAAC,CAAC;EAC9C,MAAMU,sBAAsB,GAAG9B,mBAAmB,CAAC,MAAMgB,aAAa,CAACR,KAAK,CAAC,EAAE,EAAE,CAAC;EAClF,OAAO;IACHF,EAAE,EAAEI,KAAK;IACTH,GAAG,EAAEiB,WAAW;IAChBE,QAAQ;IACRC,MAAM;IACNX,aAAa,EAAEc;EACnB,CAAC;AACL,CAAC;AAED,SAASzB,iBAAiB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}