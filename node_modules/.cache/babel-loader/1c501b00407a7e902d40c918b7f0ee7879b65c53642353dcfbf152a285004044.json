{"ast":null,"code":"'use client';\n\nimport { jsx } from 'react/jsx-runtime';\nimport { useMergeRefs } from '@floating-ui/react';\nimport { getDatalistValue, isDatalistClick } from '@u-elements/u-datalist';\nimport { forwardRef, useContext, useCallback, useEffect } from 'react';\nimport { SuggestionContext } from './Suggestion.js';\nimport { Input } from '../Input/Input.js';\n\n/**\n * Component that provides an input field for the suggestion list.\n *\n * Place as a descendant of `Suggestion`\n *\n * @example\n * <Suggestion>\n *   <Suggestion.Input />\n *   <Suggestion.List />\n * </Suggestion>\n */\nconst SuggestionInput = forwardRef(function SuggestionList({\n  value,\n  onInput,\n  ...rest\n}, ref) {\n  const {\n    listId,\n    inputRef,\n    handleFilter\n  } = useContext(SuggestionContext);\n  const mergedRefs = useMergeRefs([inputRef, ref]);\n  const updateSelected = useCallback(() => {\n    const {\n      list,\n      value\n    } = inputRef?.current || {};\n    for (const option of list?.options || []) {\n      option.selected = getDatalistValue(option) === value;\n    }\n  }, []);\n  // Update also if controlled value\n  useEffect(() => {\n    updateSelected();\n    handleFilter?.(inputRef?.current);\n  }, [value]);\n  return jsx(Input, {\n    ref: mergedRefs,\n    list: listId,\n    value: value,\n    onInput: event => {\n      onInput?.(event); // Should run first\n      updateSelected();\n      if (!isDatalistClick(event.nativeEvent)) handleFilter?.(inputRef?.current);\n    },\n    placeholder: '' // We need an empty placeholder for the clear button to be able to show/hide\n    ,\n    ...rest\n  });\n});\nexport { SuggestionInput };","map":{"version":3,"names":["jsx","useMergeRefs","getDatalistValue","isDatalistClick","forwardRef","useContext","useCallback","useEffect","SuggestionContext","Input","SuggestionInput","SuggestionList","value","onInput","rest","ref","listId","inputRef","handleFilter","mergedRefs","updateSelected","list","current","option","options","selected","event","nativeEvent","placeholder"],"sources":["/Users/riccardomarini/Dropbox/Lavori/RedCross/Login Vipps/LoginVippsLib/node_modules/@digdir/designsystemet-react/dist/esm/components/Suggestion/SuggestionInput.js"],"sourcesContent":["'use client';\nimport { jsx } from 'react/jsx-runtime';\nimport { useMergeRefs } from '@floating-ui/react';\nimport { getDatalistValue, isDatalistClick } from '@u-elements/u-datalist';\nimport { forwardRef, useContext, useCallback, useEffect } from 'react';\nimport { SuggestionContext } from './Suggestion.js';\nimport { Input } from '../Input/Input.js';\n\n/**\n * Component that provides an input field for the suggestion list.\n *\n * Place as a descendant of `Suggestion`\n *\n * @example\n * <Suggestion>\n *   <Suggestion.Input />\n *   <Suggestion.List />\n * </Suggestion>\n */\nconst SuggestionInput = forwardRef(function SuggestionList({ value, onInput, ...rest }, ref) {\n    const { listId, inputRef, handleFilter } = useContext(SuggestionContext);\n    const mergedRefs = useMergeRefs([inputRef, ref]);\n    const updateSelected = useCallback(() => {\n        const { list, value } = inputRef?.current || {};\n        for (const option of list?.options || []) {\n            option.selected = getDatalistValue(option) === value;\n        }\n    }, []);\n    // Update also if controlled value\n    useEffect(() => {\n        updateSelected();\n        handleFilter?.(inputRef?.current);\n    }, [value]);\n    return (jsx(Input, { ref: mergedRefs, list: listId, value: value, onInput: (event) => {\n            onInput?.(event); // Should run first\n            updateSelected();\n            if (!isDatalistClick(event.nativeEvent))\n                handleFilter?.(inputRef?.current);\n        }, placeholder: '' // We need an empty placeholder for the clear button to be able to show/hide\n        , ...rest }));\n});\n\nexport { SuggestionInput };\n"],"mappings":"AAAA,YAAY;;AACZ,SAASA,GAAG,QAAQ,mBAAmB;AACvC,SAASC,YAAY,QAAQ,oBAAoB;AACjD,SAASC,gBAAgB,EAAEC,eAAe,QAAQ,wBAAwB;AAC1E,SAASC,UAAU,EAAEC,UAAU,EAAEC,WAAW,EAAEC,SAAS,QAAQ,OAAO;AACtE,SAASC,iBAAiB,QAAQ,iBAAiB;AACnD,SAASC,KAAK,QAAQ,mBAAmB;;AAEzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,eAAe,GAAGN,UAAU,CAAC,SAASO,cAAcA,CAAC;EAAEC,KAAK;EAAEC,OAAO;EAAE,GAAGC;AAAK,CAAC,EAAEC,GAAG,EAAE;EACzF,MAAM;IAAEC,MAAM;IAAEC,QAAQ;IAAEC;EAAa,CAAC,GAAGb,UAAU,CAACG,iBAAiB,CAAC;EACxE,MAAMW,UAAU,GAAGlB,YAAY,CAAC,CAACgB,QAAQ,EAAEF,GAAG,CAAC,CAAC;EAChD,MAAMK,cAAc,GAAGd,WAAW,CAAC,MAAM;IACrC,MAAM;MAAEe,IAAI;MAAET;IAAM,CAAC,GAAGK,QAAQ,EAAEK,OAAO,IAAI,CAAC,CAAC;IAC/C,KAAK,MAAMC,MAAM,IAAIF,IAAI,EAAEG,OAAO,IAAI,EAAE,EAAE;MACtCD,MAAM,CAACE,QAAQ,GAAGvB,gBAAgB,CAACqB,MAAM,CAAC,KAAKX,KAAK;IACxD;EACJ,CAAC,EAAE,EAAE,CAAC;EACN;EACAL,SAAS,CAAC,MAAM;IACZa,cAAc,CAAC,CAAC;IAChBF,YAAY,GAAGD,QAAQ,EAAEK,OAAO,CAAC;EACrC,CAAC,EAAE,CAACV,KAAK,CAAC,CAAC;EACX,OAAQZ,GAAG,CAACS,KAAK,EAAE;IAAEM,GAAG,EAAEI,UAAU;IAAEE,IAAI,EAAEL,MAAM;IAAEJ,KAAK,EAAEA,KAAK;IAAEC,OAAO,EAAGa,KAAK,IAAK;MAC9Eb,OAAO,GAAGa,KAAK,CAAC,CAAC,CAAC;MAClBN,cAAc,CAAC,CAAC;MAChB,IAAI,CAACjB,eAAe,CAACuB,KAAK,CAACC,WAAW,CAAC,EACnCT,YAAY,GAAGD,QAAQ,EAAEK,OAAO,CAAC;IACzC,CAAC;IAAEM,WAAW,EAAE,EAAE,CAAC;IAAA;IACjB,GAAGd;EAAK,CAAC,CAAC;AACpB,CAAC,CAAC;AAEF,SAASJ,eAAe","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}