{"ast":null,"code":"'use client';\n\nimport { jsx } from 'react/jsx-runtime';\nimport { autoUpdate, computePosition, offset, flip, shift } from '@floating-ui/dom';\nimport { useMergeRefs } from '@floating-ui/react';\nimport { Slot } from '@radix-ui/react-slot';\nimport cl from 'clsx/lite';\nimport { forwardRef, useRef, useContext, useState, useEffect } from 'react';\nimport { Context } from './PopoverTriggerContext.js';\n\n/**\n * Popover component, used to display content in a popover over an element.\n *\n * @example with TriggerContext\n * <Popover.TriggerContext>\n *   <Popover.Trigger>Open Popover</Popover.Trigger>\n *   <Popover>\n *     Content\n *   </Popover>\n * </Popover.TriggerContext>\n *\n * @example without TriggerContext\n * <Button popovertarget=\"my-popover\">Open Popover</Button>\n * <Popover id=\"my-popover\">\n *   Content\n * </Popover>\n */\nconst Popover = forwardRef(function Popover({\n  id,\n  className,\n  onClose,\n  onOpen,\n  open,\n  variant = 'default',\n  placement = 'top',\n  autoPlacement = true,\n  asChild = false,\n  ...rest\n}, ref) {\n  const Component = asChild ? Slot : 'div';\n  const popoverRef = useRef(null);\n  const mergedRefs = useMergeRefs([popoverRef, ref]);\n  const {\n    popoverId,\n    setPopoverId\n  } = useContext(Context);\n  const [internalOpen, setInternalOpen] = useState(false);\n  const controlledOpen = open ?? internalOpen;\n  // NOTE: This code is purely to add React controlled component ability to Popover API\n  useEffect(() => {\n    const popover = popoverRef.current;\n    const handleClick = event => {\n      const el = event.target;\n      const isTrigger = el?.closest?.(`[popovertarget=\"${popover?.id}\"]`);\n      const isOutside = !isTrigger && !popover?.contains(el);\n      if (isTrigger) {\n        event.preventDefault(); // Prevent native Popover API\n        setInternalOpen(open => !open);\n        onOpen?.();\n      }\n      if (isOutside) {\n        setInternalOpen(false);\n        onClose?.();\n      }\n    };\n    const handleKeydown = event => {\n      if (event.key !== 'Escape' || !controlledOpen) return;\n      event.preventDefault(); // Prevent closing fullscreen in Safari\n      setInternalOpen(false);\n      onClose?.();\n    };\n    popover?.togglePopover?.(controlledOpen);\n    document.addEventListener('click', handleClick, true); // Use capture to execute before React event API\n    document.addEventListener('keydown', handleKeydown);\n    return () => {\n      document.removeEventListener('click', handleClick, true);\n      document.removeEventListener('keydown', handleKeydown);\n    };\n  }, [controlledOpen]);\n  // Position with floating-ui\n  useEffect(() => {\n    const popover = popoverRef.current;\n    const trigger = document.querySelector(`[popovertarget=\"${popover?.id}\"]`);\n    if (popover && trigger && controlledOpen) return autoUpdate(trigger, popover, () => {\n      computePosition(trigger, popover, {\n        placement,\n        strategy: 'fixed',\n        middleware: [offset(data => {\n          // get pseudo element arrow size\n          const styles = getComputedStyle(data.elements.floating, '::before');\n          return parseFloat(styles.height);\n        }), ...(autoPlacement ? [flip({\n          fallbackAxisSideDirection: 'start'\n        }), shift()] : []), arrowPseudoElement]\n      }).then(({\n        x,\n        y\n      }) => {\n        popover.style.translate = `${x}px ${y}px`;\n      });\n    });\n  }, [controlledOpen, placement, id, autoPlacement]);\n  // Update context with id\n  useEffect(() => {\n    if (id) setPopoverId?.(id);\n  }, [id]);\n  return jsx(Component, {\n    className: cl('ds-popover', className),\n    id: id || popoverId,\n    // @ts-ignore @types/react-dom does not understand popover yet\n    popover: 'manual',\n    \"data-variant\": variant,\n    ref: mergedRefs,\n    ...rest\n  });\n});\nconst arrowPseudoElement = {\n  name: 'ArrowPseudoElement',\n  fn(data) {\n    const {\n      elements,\n      rects,\n      placement\n    } = data;\n    let arrowX = `${Math.round(rects.reference.width / 2 + rects.reference.x - data.x)}px`;\n    let arrowY = `${Math.round(rects.reference.height / 2 + rects.reference.y - data.y)}px`;\n    if (rects.reference.width > rects.floating.width) {\n      arrowX = `${Math.round(rects.floating.width / 2)}px`;\n    }\n    if (rects.reference.height > rects.floating.height) {\n      arrowY = `${Math.round(rects.floating.height / 2)}px`;\n    }\n    switch (placement.split('-')[0]) {\n      case 'top':\n        arrowY = '100%';\n        break;\n      case 'right':\n        arrowX = '0';\n        break;\n      case 'bottom':\n        arrowY = '0';\n        break;\n      case 'left':\n        arrowX = '100%';\n        break;\n    }\n    elements.floating.setAttribute('data-placement', placement.split('-')[0]); // We only need top/left/right/bottom\n    elements.floating.style.setProperty('--ds-popover-arrow-x', arrowX);\n    elements.floating.style.setProperty('--ds-popover-arrow-y', arrowY);\n    return data;\n  }\n};\nexport { Popover };","map":{"version":3,"names":["jsx","autoUpdate","computePosition","offset","flip","shift","useMergeRefs","Slot","cl","forwardRef","useRef","useContext","useState","useEffect","Context","Popover","id","className","onClose","onOpen","open","variant","placement","autoPlacement","asChild","rest","ref","Component","popoverRef","mergedRefs","popoverId","setPopoverId","internalOpen","setInternalOpen","controlledOpen","popover","current","handleClick","event","el","target","isTrigger","closest","isOutside","contains","preventDefault","handleKeydown","key","togglePopover","document","addEventListener","removeEventListener","trigger","querySelector","strategy","middleware","data","styles","getComputedStyle","elements","floating","parseFloat","height","fallbackAxisSideDirection","arrowPseudoElement","then","x","y","style","translate","name","fn","rects","arrowX","Math","round","reference","width","arrowY","split","setAttribute","setProperty"],"sources":["/Users/riccardomarini/Dropbox/Lavori/RedCross/Login Vipps/LoginVippsLib/node_modules/@digdir/designsystemet-react/dist/esm/components/Popover/Popover.js"],"sourcesContent":["'use client';\nimport { jsx } from 'react/jsx-runtime';\nimport { autoUpdate, computePosition, offset, flip, shift } from '@floating-ui/dom';\nimport { useMergeRefs } from '@floating-ui/react';\nimport { Slot } from '@radix-ui/react-slot';\nimport cl from 'clsx/lite';\nimport { forwardRef, useRef, useContext, useState, useEffect } from 'react';\nimport { Context } from './PopoverTriggerContext.js';\n\n/**\n * Popover component, used to display content in a popover over an element.\n *\n * @example with TriggerContext\n * <Popover.TriggerContext>\n *   <Popover.Trigger>Open Popover</Popover.Trigger>\n *   <Popover>\n *     Content\n *   </Popover>\n * </Popover.TriggerContext>\n *\n * @example without TriggerContext\n * <Button popovertarget=\"my-popover\">Open Popover</Button>\n * <Popover id=\"my-popover\">\n *   Content\n * </Popover>\n */\nconst Popover = forwardRef(function Popover({ id, className, onClose, onOpen, open, variant = 'default', placement = 'top', autoPlacement = true, asChild = false, ...rest }, ref) {\n    const Component = asChild ? Slot : 'div';\n    const popoverRef = useRef(null);\n    const mergedRefs = useMergeRefs([popoverRef, ref]);\n    const { popoverId, setPopoverId } = useContext(Context);\n    const [internalOpen, setInternalOpen] = useState(false);\n    const controlledOpen = open ?? internalOpen;\n    // NOTE: This code is purely to add React controlled component ability to Popover API\n    useEffect(() => {\n        const popover = popoverRef.current;\n        const handleClick = (event) => {\n            const el = event.target;\n            const isTrigger = el?.closest?.(`[popovertarget=\"${popover?.id}\"]`);\n            const isOutside = !isTrigger && !popover?.contains(el);\n            if (isTrigger) {\n                event.preventDefault(); // Prevent native Popover API\n                setInternalOpen((open) => !open);\n                onOpen?.();\n            }\n            if (isOutside) {\n                setInternalOpen(false);\n                onClose?.();\n            }\n        };\n        const handleKeydown = (event) => {\n            if (event.key !== 'Escape' || !controlledOpen)\n                return;\n            event.preventDefault(); // Prevent closing fullscreen in Safari\n            setInternalOpen(false);\n            onClose?.();\n        };\n        popover?.togglePopover?.(controlledOpen);\n        document.addEventListener('click', handleClick, true); // Use capture to execute before React event API\n        document.addEventListener('keydown', handleKeydown);\n        return () => {\n            document.removeEventListener('click', handleClick, true);\n            document.removeEventListener('keydown', handleKeydown);\n        };\n    }, [controlledOpen]);\n    // Position with floating-ui\n    useEffect(() => {\n        const popover = popoverRef.current;\n        const trigger = document.querySelector(`[popovertarget=\"${popover?.id}\"]`);\n        if (popover && trigger && controlledOpen)\n            return autoUpdate(trigger, popover, () => {\n                computePosition(trigger, popover, {\n                    placement,\n                    strategy: 'fixed',\n                    middleware: [\n                        offset((data) => {\n                            // get pseudo element arrow size\n                            const styles = getComputedStyle(data.elements.floating, '::before');\n                            return parseFloat(styles.height);\n                        }),\n                        ...(autoPlacement\n                            ? [flip({ fallbackAxisSideDirection: 'start' }), shift()]\n                            : []),\n                        arrowPseudoElement,\n                    ],\n                }).then(({ x, y }) => {\n                    popover.style.translate = `${x}px ${y}px`;\n                });\n            });\n    }, [controlledOpen, placement, id, autoPlacement]);\n    // Update context with id\n    useEffect(() => {\n        if (id)\n            setPopoverId?.(id);\n    }, [id]);\n    return (jsx(Component, { className: cl('ds-popover', className), id: id || popoverId, \n        // @ts-ignore @types/react-dom does not understand popover yet\n        popover: 'manual', \"data-variant\": variant, ref: mergedRefs, ...rest }));\n});\nconst arrowPseudoElement = {\n    name: 'ArrowPseudoElement',\n    fn(data) {\n        const { elements, rects, placement } = data;\n        let arrowX = `${Math.round(rects.reference.width / 2 + rects.reference.x - data.x)}px`;\n        let arrowY = `${Math.round(rects.reference.height / 2 + rects.reference.y - data.y)}px`;\n        if (rects.reference.width > rects.floating.width) {\n            arrowX = `${Math.round(rects.floating.width / 2)}px`;\n        }\n        if (rects.reference.height > rects.floating.height) {\n            arrowY = `${Math.round(rects.floating.height / 2)}px`;\n        }\n        switch (placement.split('-')[0]) {\n            case 'top':\n                arrowY = '100%';\n                break;\n            case 'right':\n                arrowX = '0';\n                break;\n            case 'bottom':\n                arrowY = '0';\n                break;\n            case 'left':\n                arrowX = '100%';\n                break;\n        }\n        elements.floating.setAttribute('data-placement', placement.split('-')[0]); // We only need top/left/right/bottom\n        elements.floating.style.setProperty('--ds-popover-arrow-x', arrowX);\n        elements.floating.style.setProperty('--ds-popover-arrow-y', arrowY);\n        return data;\n    },\n};\n\nexport { Popover };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}